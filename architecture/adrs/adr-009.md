## ADR 009: Cloudinary

## Context

We need reliable cloud storage for media assets uploaded by users for social media posts. Our social media management workflow requires:
- Secure storage for images and videos uploaded by musicians
- Public URLs for media files that can be accessed by social media APIs
- Integration with our Next.js backend and Postiz scheduling system
- Separation of concerns between media storage and post scheduling

### Options

1) Self-hosted storage on our server
2) AWS S3
3) Cloudinary

## Decision

We will use Cloudinary for media asset storage and management.

Reasons for choosing Cloudinary:
1) Provides reliable cloud infrastructure with built-in CDN, ensuring consistent access to media files for social media APIs regardless of our server status.
2) Offers straightforward Node.js SDK integration that works seamlessly with our Next.js backend.
3) Generates public URLs automatically, simplifying the handoff between our upload flow and Postiz's scheduling system.

Reasons for not choosing alternatives:
1) Self-hosted storage couples media availability to our server uptime, which creates a single point of failure that could break scheduled posts if the server goes down.
2) AWS S3 requires more configuration for public URL management and CDN setup. This adds complexity without significant benefit for our use case.
3) Separating storage from our Postiz container improves system reliability, as Postiz can focus on scheduling while Cloudinary handles media delivery.


## Status

Accepted

## Consequences

Using Cloudinary decouples media storage from our application server, which improves reliability for scheduled social media posts. The managed service reduces operational burden and provides a CDN out of the box. However, we accept vendor lock-in to Cloudinary's platform and potential costs if usage exceeds the free tier. The separation of concerns between storage (Cloudinary) and scheduling (Postiz) creates a more resilient architecture where each component can operate independently.

## Potential Backups

- AWS S3 with CloudFront, if Cloudinary pricing becomes prohibitive or we need more storage control.
- Self-hosted storage on the server, for complete data ownership and no vendor lock-in, though this would require additional infrastructure management.